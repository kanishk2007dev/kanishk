<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FORTRESS | NUCLEAR COMMAND C+5</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;700&family=Orbitron:wght@400;700&display=swap');

        :root {
            --security-primary: #00ff41;
            --security-warning: #facc15;
            --security-danger: #ef4444;
            --security-bg: #050507;
            --security-accent: #0f1115;
        }

        body {
            background-color: var(--security-bg);
            color: #94a3b8;
            font-family: 'JetBrains Mono', monospace;
            overflow: hidden;
            height: 100vh;
            margin: 0;
        }

        /* Digital Code Rain Canvas */
        #codeRain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.15;
            pointer-events: none;
        }

        .crt-overlay {
            position: fixed;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.05) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.02), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.02));
            background-size: 100% 3px, 3px 100%;
            z-index: 999;
            pointer-events: none;
        }

        .scanline {
            width: 100%;
            height: 100px;
            z-index: 998;
            background: linear-gradient(0deg, rgba(0, 0, 0, 0) 0%, rgba(0, 255, 65, 0.03) 50%, rgba(0, 0, 0, 0) 100%);
            position: absolute;
            animation: scanline 15s linear infinite;
        }

        @keyframes scanline {
            0% { top: -100px; }
            100% { top: 100%; }
        }

        .secure-panel {
            background: rgba(15, 17, 21, 0.85);
            backdrop-filter: blur(10px);
            border: 1px solid #1e293b;
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
            position: relative;
            z-index: 10;
        }

        .secure-panel::after {
            content: "";
            position: absolute;
            top: 0; right: 0; width: 2px; height: 100%;
            background: var(--security-primary);
            opacity: 0.1;
        }

        .status-danger { animation: blink-red 1s infinite; }
        @keyframes blink-red { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

        .terminal-cursor {
            display: inline-block;
            width: 8px;
            height: 15px;
            background: var(--security-primary);
            animation: blink 1s infinite;
        }

        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        .nuclear-glow {
            box-shadow: 0 0 25px rgba(0, 255, 65, 0.2);
        }

        .grid-bg {
            background-image: radial-gradient(#1e293b 1px, transparent 1px);
            background-size: 30px 30px;
        }

        /* Ensure content sits above rain */
        #contentWrapper {
            position: relative;
            z-index: 20;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body class="select-none">
    <canvas id="codeRain"></canvas>
    <div class="crt-overlay"></div>
    <div class="scanline"></div>

    <div id="contentWrapper">
        <!-- TOP SYSTEM BAR -->
        <nav class="h-14 border-b border-gray-800 bg-black/80 flex items-center px-6 justify-between shrink-0">
            <div class="flex items-center gap-6">
                <div class="flex items-center gap-3">
                    <i class="fas fa-radiation text-yellow-500 text-xl animate-pulse"></i>
                    <span class="font-bold text-white tracking-[0.3em] font-['Orbitron'] text-sm md:text-base">FORTRESS <span class="text-green-500">NC-9</span></span>
                </div>
                <div class="h-4 w-px bg-gray-800 hidden sm:block"></div>
                <div class="hidden sm:block text-[10px] space-y-0.5">
                    <p class="text-gray-500 font-mono">ARCH: <span class="text-blue-400 font-bold uppercase tracking-widest">Hardened C+5 Gen-2</span></p>
                    <p class="text-gray-500 font-mono">CLEARANCE: <span class="text-red-500 font-bold uppercase">Nuclear Operator Prime</span></p>
                </div>
            </div>

            <div class="flex gap-4 md:gap-8 items-center text-[10px]">
                <div class="text-right hidden md:block">
                    <p class="text-gray-500 uppercase">Remote Source</p>
                    <p id="capturedIP" class="text-green-500 font-bold font-mono tracking-tighter animate-pulse">DETECTING...</p>
                </div>
                <div class="text-right">
                    <p class="text-gray-500 uppercase">System Time</p>
                    <p id="realTime" class="text-white font-bold">00:00:00 UTC</p>
                </div>
                <div class="hidden lg:flex gap-2">
                    <div class="px-2 py-1 bg-green-500/10 border border-green-500/30 text-green-500 rounded font-bold">AIR-GAP</div>
                    <div class="px-2 py-1 bg-red-500/10 border border-red-500/30 text-red-500 rounded font-bold uppercase">SEC-LOCK</div>
                </div>
            </div>
        </nav>

        <!-- MAIN DASHBOARD CONTENT -->
        <div class="flex-1 overflow-hidden grid grid-cols-12 gap-1 p-1 bg-black/20">
            
            <!-- LEFT: DEFENSE CONTROLS -->
            <aside class="col-span-12 lg:col-span-3 flex flex-col gap-1 overflow-y-auto">
                <div class="secure-panel p-5">
                    <div class="flex justify-between items-center mb-4 border-b border-gray-800 pb-2">
                        <span class="text-[10px] font-bold text-white tracking-widest uppercase">Operator Validation</span>
                        <i class="fas fa-microchip text-blue-500"></i>
                    </div>
                    <div class="space-y-3">
                        <div class="bg-black/60 p-3 border border-gray-800 rounded flex items-center justify-between">
                            <div>
                                <p class="text-[8px] text-gray-500">TRUST_COEFFICIENT</p>
                                <p class="text-xs text-green-400 font-bold">99.998% ALPHA</p>
                            </div>
                            <div class="h-3 w-3 rounded-full bg-green-500 shadow-[0_0_12px_#00ff41]"></div>
                        </div>
                        <div class="grid grid-cols-1 gap-2">
                            <button onclick="simulateAuth('Quantum Key Refresh')" class="p-3 bg-gray-900 hover:bg-green-900/30 text-[9px] text-white border border-gray-800 rounded flex items-center justify-between group transition-all">
                                <span>ROTATE_Q_KEYS</span>
                                <i class="fas fa-random group-hover:text-green-400"></i>
                            </button>
                            <button onclick="simulateAuth('Memory Diode Reset')" class="p-3 bg-gray-900 hover:bg-blue-900/30 text-[9px] text-white border border-gray-800 rounded flex items-center justify-between group transition-all">
                                <span>FLUSH_DMA_BUFFER</span>
                                <i class="fas fa-memory group-hover:text-blue-400"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="secure-panel p-5 flex-1">
                    <span class="text-[10px] font-bold text-white tracking-widest uppercase mb-4 block border-b border-gray-800 pb-2">Active Shielding</span>
                    <div class="space-y-6">
                        <div id="memoryMap" class="grid grid-cols-10 gap-1 opacity-60">
                            <!-- JS Memory Blocks -->
                        </div>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between text-[8px] mb-1">
                                    <span class="text-gray-500 uppercase tracking-widest">Logic Integrity</span>
                                    <span class="text-blue-400">HARDENED</span>
                                </div>
                                <div class="h-1 bg-gray-900 rounded-full">
                                    <div class="h-full bg-blue-500 w-[100%] shadow-[0_0_8px_blue]"></div>
                                </div>
                            </div>
                            <div class="p-3 bg-red-950/20 border border-red-900/40 rounded">
                                <p class="text-[9px] text-red-400 font-bold uppercase mb-1 flex items-center gap-2">
                                    <i class="fas fa-exclamation-triangle animate-pulse"></i>
                                    Suppression Mode
                                </p>
                                <p class="text-[9px] text-gray-500 font-mono leading-tight">
                                    Heuristic engine detecting unauthorized memory access patterns in Layer 4.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- CENTER: COMMAND MAP -->
            <main class="col-span-12 lg:col-span-6 flex flex-col gap-1 overflow-hidden relative">
                <div class="flex-1 secure-panel grid-bg p-6 flex flex-col">
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <h2 class="text-xl font-bold text-white tracking-widest uppercase font-['Orbitron']">Global Infrastructure</h2>
                            <p class="text-[10px] text-green-500 font-mono tracking-widest">NODE_ID: FORTRESS_MASTER_01</p>
                        </div>
                        <div class="text-right">
                            <span class="px-2 py-1 bg-yellow-600 text-black text-[10px] font-bold rounded">STATUS: STABLE</span>
                        </div>
                    </div>

                    <!-- Tactical Map Overlay -->
                    <div class="flex-1 relative border border-gray-800 rounded bg-black/40 overflow-hidden flex items-center justify-center">
                        <div id="radarPulse" class="absolute h-1 w-1 bg-green-500 rounded-full scale-0 opacity-0"></div>
                        <canvas id="topoMap" class="w-full h-full opacity-40"></canvas>
                        
                        <div class="absolute top-0 right-0 p-4">
                            <div class="bg-black/80 border border-gray-800 p-2 rounded text-[8px] font-mono space-y-1">
                                <p class="text-green-500">SAT_LINK: UP</p>
                                <p class="text-blue-500">BANDWIDTH: 1.2TBPS</p>
                                <p class="text-gray-500">PING: 0.1MS</p>
                            </div>
                        </div>
                    </div>

                    <!-- Functional C+5 Interface Modules -->
                    <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-2">
                        <div class="p-3 bg-gray-900 border border-gray-800 rounded hover:border-green-500 transition-colors cursor-pointer text-center">
                            <i class="fas fa-database text-green-500 mb-1"></i>
                            <p class="text-[8px] font-bold text-gray-300">VAULT_IO</p>
                        </div>
                        <div class="p-3 bg-gray-900 border border-gray-800 rounded hover:border-blue-500 transition-colors cursor-pointer text-center">
                            <i class="fas fa-network-wired text-blue-500 mb-1"></i>
                            <p class="text-[8px] font-bold text-gray-300">MESH_NET</p>
                        </div>
                        <div class="p-3 bg-gray-900 border border-gray-800 rounded hover:border-yellow-500 transition-colors cursor-pointer text-center">
                            <i class="fas fa-bolt text-yellow-500 mb-1"></i>
                            <p class="text-[8px] font-bold text-gray-300">CORE_TELE</p>
                        </div>
                        <div class="p-3 bg-gray-900 border border-gray-800 rounded hover:border-red-500 transition-colors cursor-pointer text-center">
                            <i class="fas fa-shield-alt text-red-500 mb-1"></i>
                            <p class="text-[8px] font-bold text-gray-300">HARD_LOCK</p>
                        </div>
                    </div>
                </div>
            </main>

            <!-- RIGHT: LOGS & THREAT INTEL -->
            <aside class="col-span-12 lg:col-span-3 flex flex-col gap-1 overflow-hidden">
                <div class="secure-panel flex-1 flex flex-col overflow-hidden">
                    <div class="p-4 border-b border-gray-800 bg-black/40 flex justify-between items-center">
                        <span class="text-[10px] font-bold text-white tracking-widest uppercase">System Heuristics</span>
                        <span class="h-2 w-2 rounded-full bg-red-500 shadow-[0_0_5px_red]"></span>
                    </div>
                    <div id="logScroll" class="p-4 font-mono text-[9px] space-y-2 overflow-y-auto flex-1 bg-black/10">
                        <!-- Content via JS -->
                    </div>
                </div>

                <div class="secure-panel p-5 h-40">
                    <span class="text-[10px] font-bold text-white tracking-widest uppercase mb-4 block border-b border-gray-800 pb-2">Quantum Entropy Pool</span>
                    <div class="flex items-end justify-center gap-1 h-16">
                        <div class="entropy-bar w-2 bg-green-500/80 rounded-t h-4"></div>
                        <div class="entropy-bar w-2 bg-green-500/80 rounded-t h-12"></div>
                        <div class="entropy-bar w-2 bg-green-500/80 rounded-t h-8"></div>
                        <div class="entropy-bar w-2 bg-green-500/80 rounded-t h-16"></div>
                        <div class="entropy-bar w-2 bg-green-500/80 rounded-t h-10"></div>
                        <div class="entropy-bar w-2 bg-green-500/80 rounded-t h-14"></div>
                        <div class="entropy-bar w-2 bg-green-500/80 rounded-t h-6"></div>
                    </div>
                </div>
            </aside>

        </div>

        <!-- COMMANDER FOOTER -->
        <footer class="h-8 bg-black border-t border-gray-800 flex items-center px-6 justify-between text-[9px] font-mono shrink-0">
            <div class="flex gap-4">
                <span class="text-gray-500">KERNEL_STATE: <span class="text-green-500">IMMUTABLE</span></span>
                <span class="text-gray-500">MEMORY_MODEL: <span class="text-blue-500">HARDENED C+5 V2</span></span>
            </div>
            <div class="flex items-center gap-3">
                <span class="text-gray-600 hidden md:block italic">ALL TRAFFIC PROXIED VIA HSM DIODE CLUSTER</span>
                <div class="h-2 w-2 rounded-full bg-blue-500 shadow-[0_0_5px_blue] animate-pulse"></div>
            </div>
        </footer>
    </div>

    <!-- HIGH-CLEARANCE MODAL -->
    <div id="secureModal" class="fixed inset-0 z-[2000] hidden bg-black/95 backdrop-blur-xl flex items-center justify-center p-4">
        <div class="max-w-md w-full secure-panel p-10 border-2 border-green-500/40 nuclear-glow">
            <div class="text-center">
                <div class="mb-6">
                    <i id="modalIcon" class="fas fa-fingerprint text-6xl text-green-500"></i>
                </div>
                <h3 id="modalTitle" class="text-xl font-bold text-white tracking-[0.3em] font-['Orbitron'] mb-2 uppercase">VERIFYING_IDENT</h3>
                <p id="modalMsg" class="text-[10px] text-gray-500 mb-8 uppercase tracking-widest leading-relaxed">Cross-referencing biometric hash with decentralized ledger.</p>
                
                <div class="space-y-4">
                    <div class="bg-black p-4 font-mono text-[9px] text-green-500 text-left h-40 overflow-hidden border border-gray-800 rounded">
                        <div id="modalTerminal"></div>
                    </div>
                    <div class="h-1 bg-gray-900 rounded-full overflow-hidden">
                        <div id="modalBar" class="h-full bg-green-500 w-0 transition-all duration-300 shadow-[0_0_10px_#00ff41]"></div>
                    </div>
                </div>

                <div id="modalBtn" class="mt-10 hidden">
                    <button onclick="hideModal()" class="w-full py-4 bg-green-600 hover:bg-green-500 text-black font-bold uppercase tracking-[0.4em] rounded transition-all shadow-[0_0_25px_rgba(0,255,65,0.4)]">VALIDATE_SESSION</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. DIGITAL CODE RAIN BACKGROUND ---
        const canvas = document.getElementById('codeRain');
        const ctx = canvas.getContext('2d');

        let width, height, columns;
        const fontSize = 14;
        const characters = "010101ABCDEFあいうえおかきくけこアイウエオカキクケコ".split("");
        let drops = [];

        function initRain() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            columns = Math.floor(width / fontSize);
            drops = [];
            for (let i = 0; i < columns; i++) {
                drops[i] = Math.random() * height;
            }
        }

        function drawRain() {
            ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
            ctx.fillRect(0, 0, width, height);
            ctx.fillStyle = "#00ff41";
            ctx.font = fontSize + "px 'JetBrains Mono'";

            for (let i = 0; i < drops.length; i++) {
                const text = characters[Math.floor(Math.random() * characters.length)];
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                if (drops[i] * fontSize > height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        window.addEventListener('resize', initRain);
        initRain();
        setInterval(drawRain, 50);

        // --- 2. IP CAPTURE & TRACE ---
        async function fetchSourceInfo() {
            const ipEl = document.getElementById('capturedIP');
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                ipEl.innerText = data.ip;
                addLog(`Inbound connection traced to source: ${data.ip}`);
            } catch (e) {
                ipEl.innerText = "LOCAL_NODE_ONLY";
                addLog("Warning: External IP tracing obstructed by hardware firewall.");
            }
        }
        fetchSourceInfo();

        // --- 3. DYNAMIC SYSTEM DATA ---
        function updateClock() {
            const now = new Date();
            document.getElementById('realTime').innerText = now.toUTCString().split(' ')[4] + ' UTC';
        }
        setInterval(updateClock, 1000);
        updateClock();

        // Memory Grid
        const memoryMap = document.getElementById('memoryMap');
        for(let i=0; i<60; i++) {
            const div = document.createElement('div');
            const state = Math.random() > 0.85 ? 'bg-blue-600' : 'bg-green-950/40';
            div.className = `h-2 rounded-sm ${state} border border-white/5 hover:bg-white/30 transition-colors`;
            memoryMap.appendChild(div);
        }

        // Live Log System
        const logScroll = document.getElementById('logScroll');
        const hardenedLogs = [
            "C+5_HARDEN: std::memory_fence() applied to stack frame.",
            "QKD_SYNC: Quantum bit error rate (QBER) within range.",
            "DMA_MONITOR: No buffer violations detected in 0xFF4A.",
            "AIR_GAP: Unidirectional diode verified for data export.",
            "KERNEL: Hardened pointer dereference [VALIDATED].",
            "THREAT: Port-scan detected at Layer 3... DROP sent.",
            "CRYPTO: Rotating ephemeral RSA-8192 parameters.",
            "HSM: Integrity report generated: 100% NOMINAL.",
            "REACTOR_SYNC: Telemetry downlink confirmed via sat-09."
        ];

        function addLog(specificText) {
            const time = new Date().toLocaleTimeString('en-US', { hour12: false });
            const logText = specificText || hardenedLogs[Math.floor(Math.random() * hardenedLogs.length)];
            const div = document.createElement('div');
            div.innerHTML = `<span class="text-gray-700">[${time}]</span> <span class="text-green-500/80">${logText}</span>`;
            logScroll.appendChild(div);
            logScroll.scrollTop = logScroll.scrollHeight;
            if(logScroll.childNodes.length > 40) logScroll.removeChild(logScroll.firstChild);
        }
        setInterval(() => addLog(), 3000);
        for(let i=0; i<6; i++) addLog();

        // Entropy Bars
        const entropyBars = document.querySelectorAll('.entropy-bar');
        setInterval(() => {
            entropyBars.forEach(bar => {
                const h = Math.floor(Math.random() * 80) + 10;
                bar.style.height = h + '%';
            });
        }, 400);

        // --- 4. AUTH MODAL SIMULATION ---
        function simulateAuth(action) {
            const modal = document.getElementById('secureModal');
            const title = document.getElementById('modalTitle');
            const term = document.getElementById('modalTerminal');
            const bar = document.getElementById('modalBar');
            const btn = document.getElementById('modalBtn');

            modal.classList.remove('hidden');
            btn.classList.add('hidden');
            term.innerHTML = '';
            bar.style.width = '0%';
            title.innerText = action;
            
            const steps = [
                "> INITIALIZING C+5 HARDENED KERNEL...",
                "> ISOLATING STACK_0X12FF44A...",
                "> BROADCASTING QUANTUM SIGNATURE...",
                "> CHECKING SOURCE IP INTEGRITY...",
                "> VERIFYING ENTROPY COEFFICIENT...",
                "> RE-ENCRYPTING PACKET HEADERS (CHACHA20-POLY1305)...",
                "> FINALIZING NUCLEAR HANDSHAKE..."
            ];

            let step = 0;
            const interval = setInterval(() => {
                if(step < steps.length) {
                    term.innerHTML += `<div>${steps[step]}</div>`;
                    term.scrollTop = term.scrollHeight;
                    bar.style.width = ((step+1) / steps.length) * 100 + '%';
                    step++;
                } else {
                    clearInterval(interval);
                    title.innerText = "HANDSHAKE_COMPLETE";
                    term.innerHTML += `<div class="text-white mt-4 font-bold uppercase tracking-widest text-center border border-white/10 py-1">--- ACCESS PRIVILEGES GRANTED ---</div>`;
                    btn.classList.remove('hidden');
                }
            }, 500);
        }

        function hideModal() {
            document.getElementById('secureModal').classList.add('hidden');
        }

        // Radar Pulse Logic
        const radar = document.getElementById('radarPulse');
        setInterval(() => {
            const x = Math.random() * 80 + 10;
            const y = Math.random() * 80 + 10;
            radar.style.left = x + '%';
            radar.style.top = y + '%';
            radar.animate([
                { transform: 'scale(0)', opacity: 1 },
                { transform: 'scale(100)', opacity: 0 }
            ], { duration: 3000, iterations: 1 });
        }, 5000);
    </script>
</body>
</html>
